var mainVisual={CLS_IS_CURRENT:"is-current",timer:null,maxNo:0,currentNo:1,setup:function(){this.getMaxNo(),this.setTimer(),this.setEvent()},getMaxNo:function(){this.maxNo=$(".mainVisualItem").length},setTimer:function(){var e=this;this.timer=setInterval(function(){e.changePicture()},7e3)},changePicture:function(){$(".mainVisualItem:not(:eq("+this.currentNo+"))").fadeOut(1e3),$(".mainVisualItem:eq("+this.currentNo+")").fadeIn(500),$(".numBtn:not(:eq("+this.currentNo+"))").removeClass(this.CLS_IS_CURRENT),$(".numBtn:eq("+this.currentNo+")").addClass(this.CLS_IS_CURRENT),this.currentNo=this.currentNo+1,this.currentNo===this.maxNo&&(this.currentNo=0)},setEvent:function(){var e=this;$(".numBtn").on("click",function(){e.currentNo=$(".numBtn").index(this),e.changePicture()}),$(".pauseBtn").on("click",function(){$(this).hasClass("pauseBtn")?$(this).html("&#9656;"):$(this).html("||"),$(this).toggleClass("pauseBtn"),$(this).toggleClass("startBtn"),$(this).hasClass("pauseBtn")?e.setTimer():clearInterval(e.timer)})}};$(function(){mainVisual.setup()});var PageAlgo=function(){var e,t,n,r,i=0,a=!0,s=[],o=[],u=5,c=0,l=!1,h=0;function g(e,t,n,r){var i=function(e,t,n){for(var r="",i=t;i<=n;i++)r=r+" "+e[i];return r.replace(/\+\+\+/g,"<p>").replace(/\-\-\-/g,"</p>").replace(/\+\+/g,"<h1>").replace(/\-\-/g,"</h1>")}(e,t,n);return r.innerHTML=i,r.clientHeight}function f(e,t,s,o){0==t&&(r=function(e,t){for(var r=n.length>1e3?1e3:n.length-1,i="",a=0;a<=r;a++)i=i+" "+e[a];t.innerHTML=i;var s,o=t.clientHeight;return s=r*h/o,Math.floor(2*s)}(e,o));var u=t+r;u>e.length&&(u=e.length-1);var c=t+u;c>e.length&&(c=e.length-1);var l=function e(t,n,r,s,o,u){var c=parseInt((r+s)/2);if(r>s)return a=!0,i;var l=g(t,n,c,u),h=g(t,n,r,u),f=g(t,n,s,u);return h>o&&f>o?(a=!1,r):l==o?c:l>o?(i=r,s,e(t,n,r,c-1,o,u)):l<o?(i=r,s,e(t,n,c+1,s,o,u)):void 0}(e,t,t,c,s,o);return(l=a?function(e,t,n,r,i){for(var a=n,s=n+1;s<e.length;s++)if(a=s,g(e,t,s,i)>r){a=s-1;break}return g(e,t,a,i),a}(e,t,l,s,o):function(e,t,n,r,i){for(var a=n,s=n-1;s>t;s--)if(a=s,g(e,t,s,i)<r){a=s;break}return g(e,t,a,i),a}(e,t,l,s,o))+1}var p=0;function m(e){e.innerHTML=e.innerHTML+"<p></p>",e.querySelector("p:last-child").style.display="none"}function d(){for(var t=0;t<c;t++)e[t].style.height="",e[t].innerHTML="",e[t].style.display="block"}return{initialise:function(t,n,r){c=t,h=n,e=document.querySelectorAll(r);for(var i=0;i<u;i++)o[i]=0;l=!1},Next:function(){if(l)return!1;d(),s.push(o[0]),o[0]=o[c];for(var t=0;t<c;t++)if(o[t+1]=f(n,o[t],h,e[t]),-1!=n[o[t+1]-1].search(/---/)&&m(e[t]),-1!=n[o[t+1]-2].search(/---/)&&m(e[t]),-1!=n[o[t+1]-3].search(/---/)&&m(e[t]),o[t+1]==n.length){l=!0,e[t].style.height=p+"px",t+1<c&&(e[t+1].style.display="none");break}return!0},Prev:function(){if(l=!1,0==s.length)return!1;d(),o[0]=s.pop(),d();for(var t=0;t<c;t++)o[t+1]=f(n,o[t],h,e[t]),-1!=n[o[t+1]-1].search(/---/)&&m(e[t]),-1!=n[o[t+1]-2].search(/---/)&&m(e[t]),-1!=n[o[t+1]-3].search(/---/)&&m(e[t]),o[t+1]==n.length&&(l=!0);return!0},First:function(){s=[],t=document.getElementById("hiddenTxt").innerHTML,n=t.replace(/<p>/g," +++").replace(/<\/p>/g,"---").replace(/<h1>/g," ++").replace(/<\/h1>/g,"--").split(" "),d(),o[0]=0;for(var r=0;r<c;r++)o[r+1]=f(n,o[r],h,e[r]),-1!=n[o[r+1]-1].search(/---/)&&m(e[r]),-1!=n[o[r+1]-2].search(/---/)&&m(e[r]),o[r+1]==n.length&&(l=!0);p=e[0].offsetHeight},fillDiv:f}}(),routes={HomePage:"home-page-id",PhotosPage:"photos-page-id",AboutPage:"about-page-id",SpecsPage:"specs-page-id",ArticlesPage:"articles-page-id",SearchPage:"search-page-id",BlogPage:"blog-page-id"},cur_route="HomePage";function router(){var e=location.hash.slice(1).split("/"),t=e[0];t!=cur_route&&("SearchPage"!=t&&(document.getElementById("query").value=""),"ArticlesPage"==t&&(1==e.length?articlesCtrl.goTo("gsxr400","nov1984"):articlesCtrl.goTo(e[1],e[2])),document.getElementById(routes[cur_route]).classList.add("hidden"),document.getElementById(routes[t]).classList.remove("hidden"),cur_route=t)}window.location.hash="#"+cur_route,$(window).on("hashchange",function(e){router()});